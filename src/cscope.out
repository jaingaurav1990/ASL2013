cscope 15 $HOME/Documents/Studies/Fall13/Lab/project/src               0000024610
	@ch/ethz/inf/asl13/user40/Client.java

1 
·ckage
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
;

3 
impÜt
 
	gjavax
.
	gxml
.
	gbšd
.
	gªnÙ©iÚ
.*;

8 @
XmlRoÙEËm’t


9 
public
 cÏs 
	cCl›Á
 {

12 
public
 
	mid
;

15 
public
 
boŞ—n
 
	mÿnS’d
;

18 
public
 
boŞ—n
 
	mÿnReûive
;

23 
public
 
	$Cl›Á
() {}

30 
public
 
	$Cl›Á
(
SŒšg
 
s
) {

31 
id
 = 
IÁeg”
.
	`·r£IÁ
(
s
);

32 
ÿnS’d
 = 
Œue
;

33 
ÿnReûive
 = 
Œue
;

34 
	}
}

36 @
Ov”ride


37 
public
 
SŒšg
 
	$toSŒšg
() {

38  "Cl›Á(" + 
id
 + ")";

39 
	}
}

	@ch/ethz/inf/asl13/user40/DatabaseServicePreparedStatement.java

1 
·ckage
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
;

3 
impÜt
 
	gjava
.
	gsql
.
	gCÚÃùiÚ
;

4 
impÜt
 
	gjava
.
	gsql
.
	gDriv”Mªag”
;

5 
impÜt
 
	gjava
.
	gsql
.
	gP»·»dS‹m’t
;

6 
impÜt
 
	gjava
.
	gsql
.
	gSQLExû±iÚ
;

7 
impÜt
 
	gjava
.
	gsql
.
	gResuÉS‘
;

8 
impÜt
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
.*;

13 
public
 cÏs 
	cD©aba£S”viûP»·»dS‹m’t
 
im¶em’ts
 
	mMes§gšgS”viû
 {

15 @
Ov”ride


16 
public
 
	$š£¹Mes§ge
(
Mes§ge
 
mes§ge
) {

17 
Œy
 {

18 
CÚÃùiÚ
 
cÚ
 = 
	`g‘CÚÃùiÚ
();

19 
P»·»dS‹m’t
 
p¡
 = 
nuÎ
;

20 
ResuÉS‘
 
rs
 = 
nuÎ
;

21 
SŒšg
 
¡m
 = "INSERT INTO " + 
mes§geTabË
 + " values(DEFAULT, ?, ?, ?, ?, ?, ?,‚ow())";

22 
p¡
 = 
cÚ
.
	`´•¬eS‹m’t
(
¡m
);

23 
p¡
.
	`£tIÁ
(1, 
mes§ge
.
queueId
);

24 
p¡
.
	`£tSŒšg
(2, 
mes§ge
.
‹xt
);

25 
p¡
.
	`£tIÁ
(3, 
mes§ge
.
´iÜ™y
);

26 
p¡
.
	`£tIÁ
(4, 0);

27 
p¡
.
	`£tIÁ
(5, 0);

28 
p¡
.
	`£tIÁ
(6, 0);

29 
p¡
.
	`execu‹Upd©e
();

31 
	`ÿtch
 (
SQLExû±iÚ
 
e
) {

32 
Sy¡em
.
out
.
	`´šn
("SQL Exceptionƒncountered");

33 
e
.
	`´štSckT¿û
();

39 @
Ov”ride


40 
public
 
Mes§ge
 
	$g‘Fœ¡Mes§ge
(
queue
, 
Cl›Á
 
£nd”
, 
boŞ—n
 
»move
) {

41 
Œy
 {

42 
CÚÃùiÚ
 
cÚ
 = 
	`g‘CÚÃùiÚ
();

43 
P»·»dS‹m’t
 
p¡
 = 
nuÎ
;

44 
ResuÉS‘
 
rs
 = 
nuÎ
;

45 
SŒšg
 
¡m
 = "SELECT msg,…ri, qid FROM " + 
mes§geTabË
 + " WHERE sender = ? ORDER BYstamp LIMIT 1";

46 
p¡
 = 
cÚ
.
	`´•¬eS‹m’t
(
¡m
);

47 
p¡
.
	`£tIÁ
(1, 
£nd”
.
id
);

48 
rs
 = 
p¡
.
	`execu‹Qu”y
();

49 ià(
rs
.
	`Ãxt
()) {

50 
Mes§ge
 
mes§ge
 = 
Ãw
 
	`Mes§ge
(
rs
.
	`g‘SŒšg
(1),„s.
	`g‘IÁ
(2),„s.getInt(3));

51  
mes§ge
;

54  
nuÎ
;

57 
	`ÿtch
 (
SQLExû±iÚ
 
e
) {

58 
Sy¡em
.
out
.
	`´šn
("SQL Exceptionƒncountered");

59 
e
.
	`´štSckT¿û
();

60  
nuÎ
;

63 
	}
}

65 @
Ov”ride


66 
public
 
Mes§ge
 
	$g‘Mes§geOfHighe¡PriÜ™y
(
queue
, 
Cl›Á
 
£nd”
, 
boŞ—n
 
»move
) {

67 
Œy
 {

68 
CÚÃùiÚ
 
cÚ
 = 
	`g‘CÚÃùiÚ
();

69 
P»·»dS‹m’t
 
p¡
 = 
nuÎ
;

70 
ResuÉS‘
 
rs
 = 
nuÎ
;

71 
SŒšg
 
¡m
 = "SELECT msg,…ri, qid FROM " + 
mes§geTabË
 + " WHERE sender = ? ORDER BY…ri DESC,stamp ASC";

72 
p¡
 = 
cÚ
.
	`´•¬eS‹m’t
(
¡m
);

73 
p¡
.
	`£tIÁ
(1, 
£nd”
.
id
);

74 
rs
 = 
p¡
.
	`execu‹Qu”y
();

75 ià(
rs
.
	`Ãxt
()) {

76 
Mes§ge
 
mes§ge
 = 
Ãw
 
	`Mes§ge
(
rs
.
	`g‘SŒšg
(1),„s.
	`g‘IÁ
(2),„s.getInt(3));

77  
mes§ge
;

80  
nuÎ
;

83 
	`ÿtch
 (
SQLExû±iÚ
 
e
) {

84 
Sy¡em
.
out
.
	`´šn
("SQL Exceptionƒncountered");

85 
e
.
	`´štSckT¿û
();

86  
nuÎ
;

88 
	}
}

90 
public
 [] 
	$li¡Queues
() {

91 
Œy
 {

92 
CÚÃùiÚ
 
cÚ
 = 
	`g‘CÚÃùiÚ
();

93 
P»·»dS‹m’t
 
p¡
 = 
nuÎ
;

94 
ResuÉS‘
 
rs
 = 
nuÎ
;

95 
SŒšg
 
¡m
 = "SELECT id, COUNT(*èov” (·¹™iÚ by 1èFROM " + 
queueTabË
;

96 
p¡
 = 
cÚ
.
	`´•¬eS‹m’t
(
¡m
);

97 
rs
 = 
p¡
.
	`execu‹Qu”y
();

98 
¬¿ySize
 = 0;

99 ià(
rs
.
	`Ãxt
()) {

100 
¬¿ySize
 = 
rs
.
	`g‘IÁ
(2);

103 [] 
queueLi¡
 = 
Ãw
 [0];

104  
queueLi¡
;

107 [] 
queueLi¡
 = 
Ãw
 [
¬¿ySize
];

108 
queueLi¡
[0] = 
rs
.
	`g‘IÁ
(1);

109 
idx
 = 1;

110 
rs
.
	`Ãxt
()) {

111 
queueLi¡
[
idx
] = 
rs
.
	`g‘IÁ
(1);

112 
idx
++;

114  
queueLi¡
;

116 
	`ÿtch
 (
SQLExû±iÚ
 
e
) {

117 
Sy¡em
.
out
.
	`´šn
("SQL Exceptionƒncountered");

118 
e
.
	`´štSckT¿û
();

119  
nuÎ
;

121 
	}
}

123 @
Ov”ride


124 
public
 [] 
	$li¡QueuesW™hWa™šgMes§ges
(
Cl›Á
 
ş›Á
) {

126 
Œy
 {

127 
CÚÃùiÚ
 
cÚ
 = 
	`g‘CÚÃùiÚ
();

128 
P»·»dS‹m’t
 
p¡
 = 
nuÎ
;

129 
ResuÉS‘
 
rs
 = 
nuÎ
;

130 
SŒšg
 
¡m
 = "SELECT id, COUNT(*èov” (·¹™iÚ by 1èFROM " + 
mes§geTabË
 + " WHERE sender = ?";

131 
p¡
 = 
cÚ
.
	`´•¬eS‹m’t
(
¡m
);

132 
rs
 = 
p¡
.
	`execu‹Qu”y
();

133 
¬¿ySize
 = 0;

134 ià(
rs
.
	`Ãxt
()) {

135 
¬¿ySize
 = 
rs
.
	`g‘IÁ
(2);

138 [] 
queueLi¡
 = 
Ãw
 [0];

139  
queueLi¡
;

142 [] 
queueLi¡
 = 
Ãw
 [
¬¿ySize
];

143 
queueLi¡
[0] = 
rs
.
	`g‘IÁ
(1);

144 
idx
 = 1;

145 
rs
.
	`Ãxt
()) {

146 
queueLi¡
[
idx
] = 
rs
.
	`g‘IÁ
(1);

147 
idx
++;

150  
queueLi¡
;

152 
	`ÿtch
 (
SQLExû±iÚ
 
e
) {

153 
Sy¡em
.
out
.
	`´šn
("SQL Exceptionƒncountered");

154 
e
.
	`´štSckT¿û
();

155  
nuÎ
;

157 
	}
}

159 @
Ov”ride


160 
public
 
	$ü—‹Queue
() {

161 
Œy
 {

162 
CÚÃùiÚ
 
cÚ
 = 
	`g‘CÚÃùiÚ
();

163 
P»·»dS‹m’t
 
p¡
 = 
nuÎ
;

164 
ResuÉS‘
 
rs
 = 
nuÎ
;

165 
SŒšg
 
¡m
 = "INSERT INTO " + 
queueTabË
 + " values(DEFAULT) RETURNING id";

166 
p¡
 = 
cÚ
.
	`´•¬eS‹m’t
(
¡m
);

167 
rs
 = 
p¡
.
	`execu‹Qu”y
();

168 ià(
rs
.
	`Ãxt
()) {

169  
rs
.
	`g‘IÁ
(1);

175 
	`ÿtch
 (
SQLExû±iÚ
 
e
) {

176 
Sy¡em
.
out
.
	`´šn
("SQL Exceptionƒncountered");

177 
e
.
	`´štSckT¿û
();

180 
	}
}

182 @
Ov”ride


183 
public
 
	$d–‘eQueue
(
queue
) {

184 
Œy
 {

185 
CÚÃùiÚ
 
cÚ
 = 
	`g‘CÚÃùiÚ
();

186 
P»·»dS‹m’t
 
p¡
 = 
nuÎ
;

187 
SŒšg
 
¡m
 = "DELETE FROM " + 
queueTabË
 + " WHERE id = ? ";

188 
p¡
 = 
cÚ
.
	`´•¬eS‹m’t
(
¡m
);

189 
p¡
.
	`£tIÁ
(1, 
queue
);

190 
p¡
.
	`execu‹Upd©e
();

192 
	`ÿtch
 (
SQLExû±iÚ
 
e
) {

193 
Sy¡em
.
out
.
	`´šn
("SQL Exceptionƒncountered");

194 
e
.
	`´štSckT¿û
();

196 
	}
}

200 
´iv©e
 
CÚÃùiÚ
 
	$g‘CÚÃùiÚ
() {

202 
Œy
 {

203  
Driv”Mªag”
.
	`g‘CÚÃùiÚ
("jdbc:postgresql://127.0.0.1:5432/demodb1");

205 
	`ÿtch
 (
SQLExû±iÚ
 
e
) {

206 
Sy¡em
.
out
.
	`´šn
("Connection failed. Check console");

207 
e
.
	`´štSckT¿û
();

208  
nuÎ
;

210 
	}
}

212 
´iv©e
 
SŒšg
 
	gqueueTabË
 = "queues";

213 
´iv©e
 
SŒšg
 
	gmes§geTabË
 = "messages";

	@ch/ethz/inf/asl13/user40/Message.java

1 
·ckage
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
;

3 
impÜt
 
	gjavax
.
	gxml
.
	gbšd
.
	gªnÙ©iÚ
.*;

8 @
XmlRoÙEËm’t


9 
public
 cÏs 
	cMes§ge
 {

11 
public
 
SŒšg
 
	m‹xt
;

13 
public
 
	m´iÜ™y
;

15 
public
 
	mqueueId
;

17 
public
 
Cl›Á
 
	m£nd”
;

19 
public
 
Cl›Á
 
	m»ûiv”
;

21 
public
 
	$Mes§ge
() {}

23 
public
 
	$Mes§ge
(
SŒšg
 
‹xt
) {

24 
this
.
‹xt
 =ext;

25 
	}
}

27 
public
 
	$Mes§ge
(
SŒšg
 
‹xt
, 
´iÜ™y
, 
queueId
) {

28 
	`this
(
‹xt
);

29 
this
.
´iÜ™y
 =…riority;

30 
this
.
queueId
 = queueId;

31 
	}
}

38 
public
 
boŞ—n
 
	$isNuÎMes§ge
() {

39  
‹xt
 =ğ
nuÎ
 && 
£nd”
 =ğnuÎ && 
»ûiv”
 ==‚ull;

40 
	}
}

42 @
Ov”ride


43 
public
 
SŒšg
 
	$toSŒšg
() {

44 ià(
	`isNuÎMes§ge
()) {

47  
SŒšg
.
	`fÜm©
(

49 
queueId
,

50 
´iÜ™y
,

51 
£nd”
,

52 
»ûiv”
 =ğ
nuÎ
 ? "all" :„eceiver,

53 
‹xt
);

55 
	}
}

	@ch/ethz/inf/asl13/user40/MessagingService.java

1 
·ckage
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
;

3 
impÜt
 
	gjavax
.
	gjws
.
	gWebM‘hod
;

4 
impÜt
 
	gjavax
.
	gjws
.
	gWebS”viû
;

5 
impÜt
 
	gjavax
.
	gjws
.
	gsßp
.
	gSOAPBšdšg
;

6 
impÜt
 
	gjavax
.
	gjws
.
	gsßp
.
	gSOAPBšdšg
.
	gStyË
;

11 @
	gWebS”viû


12 @
	$SOAPBšdšg
(
¡yË
 = 
StyË
.
RPC
)

13 
public
 
š‹rçû
 
Mes§gšgS”viû
 {

16 
public
 
fš®
 
SŒšg
 
NAMESPACE
 = "http://service.user40.asl13.inf.ethz.ch/";

19 
public
 
fš®
 
SŒšg
 
PORT_NAME
 = "MessagingServicePort";

22 
public
 
fš®
 
SŒšg
 
SERVICE_NAME
 = "MessagingService";

28 @
WebM‘hod


29 
	`š£¹Mes§ge
(
Mes§ge
 
mes§ge
);

43 @
WebM‘hod


44 
Mes§ge
 
	`g‘Fœ¡Mes§ge
(
queue
, 
Cl›Á
 
£nd”
, 
boŞ—n
 
»move
);

59 @
WebM‘hod


60 
Mes§ge
 
	`g‘Mes§geOfHighe¡PriÜ™y
(
queue
, 
Cl›Á
 
£nd”
, 
boŞ—n
 
»move
);

66 @
WebM‘hod


67 [] 
	`li¡Queues
();

74 @
WebM‘hod


75 [] 
	`li¡QueuesW™hWa™šgMes§ges
(
Cl›Á
 
ş›Á
);

81 @
WebM‘hod


82 
	`ü—‹Queue
();

88 @
WebM‘hod


89 
	`d–‘eQueue
(
queue
);

90 
	}
}

	@ch/ethz/inf/asl13/user40/client/Chatter.java

1 
·ckage
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
.
	gş›Á
;

3 
impÜt
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
.*;

9 
public
 
fš®
 cÏs 
	cCh©‹r
 
ex‹nds
 
	mMes§gšgS”viûCl›Á
 {

11 
´iv©e
 
	$Ch©‹r
(
SŒšg
 
ş›ÁID
) {

12 
	`su³r
(
ş›ÁID
, 4);

21 
public
 
	$maš
(
SŒšg
[] 
¬gs
) {

22 ià(
¬gs
.
Ëngth
 < 1) {

23 
Sy¡em
.
”r
.
	`´šn
("u§ge: jav¨" + 
Ch©‹r
.
şass
.
	`g‘Name
() + " clientID [partnerID]");

24 
Sy¡em
.
	`ex™
(1);

27 
Ch©‹r
 
­p
 = 
Ãw
 
	`Ch©‹r
(
¬gs
[0]);

29 
Mes§ge
 
m
;

30 ià(
¬gs
.
Ëngth
 > 1) {

31 
m
 = 
­p
.
	`ü—‹Mes§ge
();

32 
m
.
»ûiv”
 = 
Ãw
 
	`Cl›Á
(
¬gs
[1]);

34 
m
 = 
nuÎ
;

37 
­p
.
	`£ndMes§gesIndefš™–y
(
m
);

38 
	}
}

	@ch/ethz/inf/asl13/user40/client/Dictator.java

1 
·ckage
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
.
	gş›Á
;

3 
impÜt
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
.*;

9 
public
 
fš®
 cÏs 
	cDiù©Ü
 
ex‹nds
 
	mMes§gšgS”viûCl›Á
 {

11 
´iv©e
 
fš®
 
SŒšg
 
	mcommªdText
;

13 
´iv©e
 
	$Diù©Ü
(
SŒšg
 
ş›ÁID
) {

14 
	`su³r
(
ş›ÁID
, 
WÜk”
.
RESULT_QUEUE
);

16 
commªdText
 = 
	`ü—‹Mes§ge
().
‹xt
 + " DO SOMETHING NOW!";

19 @
Ov”ride


20 
´Ùeùed
 
	$befÜeS’dšgMes§ge
(
Mes§ge
 
mes§ge
) {

21 
mes§ge
.
»ûiv”
 = 
nuÎ
;

22 
mes§ge
.
‹xt
 = 
commªdText
;

23 
mes§ge
.
queueId
 = 
WÜk”
.
REQUEST_QUEUE
;

24 
	}
}

30 
public
 
	$maš
(
SŒšg
[] 
¬gs
) {

31 ià(
¬gs
.
Ëngth
 < 1) {

32 
Sy¡em
.
”r
.
	`´šn
("u§ge: jav¨" + 
Diù©Ü
.
şass
.
	`g‘Name
() + " clientID");

33 
Sy¡em
.
	`ex™
(1);

36 
Diù©Ü
 
­p
 = 
Ãw
 
	`Diù©Ü
(
¬gs
[0]);

38 
Mes§ge
 
m
 = 
­p
.
	`ü—‹Mes§ge
();

39 
­p
.
	`£ndMes§gesIndefš™–y
(
m
);

40 
	}
}

	@ch/ethz/inf/asl13/user40/client/MainFrame.java

1 
·ckage
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
.
	gş›Á
;

3 
impÜt
 
	gjava
.
	gawt
.*;

4 
impÜt
 
	gjava
.
	gawt
.
	gev’t
.*;

5 
impÜt
 
	gjavax
.
	gswšg
.*;

6 
impÜt
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
.*;

11 
public
 cÏs 
	cMašF¿me
 
ex‹nds
 
	mJF¿me
 {

14 
public
 
fš®
 
boŞ—n
 
	mÚMacOSX


15 ğ"MaøOS X".
equ®s
(
Sy¡em
.
g‘Prİ”ty
("os.name"));

17 
public
 
	$MašF¿me
() {

18 
	`su³r
();

20 
fš®
 
Mes§gšgS”viû
 
£rviû
 = 
Mes§gšgS”viûCl›Á
.
	`g‘PÜt
();

22 
fš®
 
JTextPªe
 
‹xt
 = 
Ãw
 
	`JTextPªe
();

23 
fš®
 
JComboBox
 
queueS–eùiÚ
 = 
Ãw
 
	`JComboBox
();

24 
fš®
 
JComboBox
 
´iÜ™yS–eùiÚ
 = 
Ãw
 
	`JComboBox
Òew 
IÁeg”
[]{ 1, 2, 3, 4, 5 });

25 
fš®
 
JBu‰Ú
 
£ndBu‰Ú
 = 
Ãw
 
	`JBu‰Ú
("Send");

27 
‹xt
.
	`£tText
("Hello");

29 
AùiÚLi¡’”
 
»äeshQueues
 = 
Ãw
 
	`AùiÚLi¡’”
() {

30 @
Ov”ride


31 
public
 
	`aùiÚP”fÜmed
(
AùiÚEv’t
 
e
) {

32 
queueS–eùiÚ
.
	`»moveAÎI‹ms
();

33 
id
 : 
£rviû
.
	`li¡Queues
()) {

34 
queueS–eùiÚ
.
	`addI‹m
(
IÁeg”
.
	`v®ueOf
(
id
));

38 
queueS–eùiÚ
.
	`addI‹m
(
IÁeg”
.
	`v®ueOf
(-23));

41 
»äeshQueues
.
	`aùiÚP”fÜmed
(
nuÎ
);

43 
£ndBu‰Ú
.
	`addAùiÚLi¡’”
(
Ãw
 
	`AùiÚLi¡’”
() {

45 @
Ov”ride


46 
public
 
	`aùiÚP”fÜmed
(
AùiÚEv’t
 
e
) {

47 
Mes§ge
 
mes§ge
 = 
Ãw
 
	`Mes§ge
(
‹xt
.
	`g‘Text
());

48 
mes§ge
.
´iÜ™y
 = ((
IÁeg”
)
´iÜ™yS–eùiÚ
.
	`g‘S–eùedI‹m
()).
	`štV®ue
();

49 
mes§ge
.
queueId
 = ((
IÁeg”
)
queueS–eùiÚ
.
	`g‘S–eùedI‹m
()).
	`štV®ue
();

50 
£rviû
.
	`š£¹Mes§ge
(
mes§ge
);

54 
JPª–
 
bÙtom
 = 
Ãw
 
	`JPª–
();

55 
bÙtom
.
	`£tAlignm’tX
(1f);

56 
bÙtom
.
	`£tLayout
(
Ãw
 
	`BoxLayout
(bÙtom, 
BoxLayout
.
X_AXIS
));

57 
bÙtom
.
	`add
(
queueS–eùiÚ
);

58 
bÙtom
.
	`add
(
Box
.
	`ü—‹RigidA»a
(
Ãw
 
	`Dim’siÚ
(5, 0)));

59 
bÙtom
.
	`add
(
´iÜ™yS–eùiÚ
);

60 
bÙtom
.
	`add
(
Box
.
	`ü—‹RigidA»a
(
Ãw
 
	`Dim’siÚ
(5, 0)));

61 
bÙtom
.
	`add
(
£ndBu‰Ú
);

63 
	`add
(
‹xt
, 
BÜd”Layout
.
CENTER
);

64 
	`add
(
bÙtom
, 
BÜd”Layout
.
SOUTH
);

66 
	`£tT™Ë
("Graphical Messaging Client");

67 
	`£tDeçuÉClo£O³¿tiÚ
(
JF¿me
.
EXIT_ON_CLOSE
);

68 
	`£tSize
(350, 300);

74 
public
 
	$maš
(
SŒšg
[] 
¬gs
) {

77 ià(
ÚMacOSX
) {

78 
Sy¡em
.
	`£tPrİ”ty
("apple.laf.useScreenMenuBar", "true");

83 
Œy
 {

84 
UIMªag”
.
	`£tLookAndF“l
(UIMªag”.
	`g‘Sy¡emLookAndF“lCÏssName
());

86 
	`ÿtch
 (
Exû±iÚ
 
e
) {

87 
Sy¡em
.
”r
.
	`´šn
(
e
);

90 
Ãw
 
	`MašF¿me
().
	`£tVisibË
(
Œue
);

91 
	}
}

	@ch/ethz/inf/asl13/user40/client/MessagePasser.java

1 
·ckage
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
.
	gş›Á
;

3 
impÜt
 
	gjava
.
	gut
.*;

4 
impÜt
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
.*;

10 
public
 
fš®
 cÏs 
	cMes§gePas£r
 
ex‹nds
 
	mMes§gšgS”viûCl›Á
 {

12 
´iv©e
 
fš®
 
	mMESSAGE_PASSER_QUEUE
 = 2;

14 
´iv©e
 
Rªdom
 
	m¿ndom
 = 
Ãw
 Random();

15 
´iv©e
 
fš®
 
	mLi¡
<
	mCl›Á
> 
	mş›Ás
 = 
Ãw
 
A¼ayLi¡
<
Cl›Á
>();

16 
´iv©e
 
Mes§ge
 
	mmes§ge
 = 
Ãw
 Message();

18 
´iv©e
 
	$Mes§gePas£r
(
SŒšg
 
ş›ÁID
) {

19 
	`su³r
(
ş›ÁID
, 
MESSAGE_PASSER_QUEUE
);

25 
´iv©e
 
Cl›Á
 
	$g‘NextRªdomCl›Á
() {

26  
ş›Ás
.
	`g‘
(
¿ndom
.
	`ÃxtIÁ
(ş›Ás.
	`size
()));

27 
	}
}

32 @
Ov”ride


33 
´Ùeùed
 
	$befÜeS’dšgMes§ge
(
Mes§ge
 
mes§ge
) {

34 
mes§ge
.
»ûiv”
 = 
	`g‘NextRªdomCl›Á
();

35 
	}
}

44 
public
 
	$maš
(
SŒšg
[] 
¬gs
) {

45 ià(
¬gs
.
Ëngth
 < 2) {

46 
Sy¡em
.
”r
.
	`´šn
("u§ge: jav¨" + 
Mes§gePas£r
.
şass
.
	`g‘Name
() + " clientID„eceiver [receiver...]");

47 
Sy¡em
.
	`ex™
(1);

50 
Mes§gePas£r
 
­p
 = 
Ãw
 
	`Mes§gePas£r
(
¬gs
[0]);

51 
i
 = 1; i < 
¬gs
.
Ëngth
; i++) {

52 
Cl›Á
 
c
 = 
Ãw
 
	`Cl›Á
(
¬gs
[
i
]);

53 ià(
c
.
id
 !ğ
­p
.
	`g‘Cl›Á
().id) {

54 
­p
.
ş›Ás
.
	`add
(
c
);

58 
Mes§ge
 
m
 = 
­p
.
	`ü—‹Mes§ge
();

59 
m
.
»ûiv”
 = 
­p
.
	`g‘NextRªdomCl›Á
();

60 
m
.
´iÜ™y
 = 4;

62 
­p
.
	`£ndMes§gesIndefš™–y
(
m
);

63 
	}
}

	@ch/ethz/inf/asl13/user40/client/MessagingServiceClient.java

1 
·ckage
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
.
	gş›Á
;

3 
impÜt
 
	gjava
.
	gÃt
.
	gM®fÜmedURLExû±iÚ
;

4 
impÜt
 
	gjava
.
	gÃt
.
	gURL
;

5 
impÜt
 
	gjavax
.
	gxml
.
	gÇme¥aû
.
	gQName
;

6 
impÜt
 
	gjavax
.
	gxml
.
	gws
.
	gS”viû
;

7 
impÜt
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
.*;

8 
impÜt
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
.
	g£rv”
.
	gS”v”
;

13 
public
 cÏs 
	cMes§gšgS”viûCl›Á
 {

15 
´iv©e
 
fš®
 
Mes§gšgS”viû
 
	mmes§gšgS”viû
 = 
g‘PÜt
();

16 
´iv©e
 
fš®
 
Cl›Á
 
	mş›Á
;

17 
´iv©e
 
fš®
 
	mqueueId
;

19 
public
 
	$Mes§gšgS”viûCl›Á
(
SŒšg
 
ş›ÁID
, 
queueId
) {

20 
this
.
ş›Á
 = 
Ãw
 
	`Cl›Á
(
ş›ÁID
);

21 
this
.
queueId
 = queueId;

24 
public
 
Cl›Á
 
	$g‘Cl›Á
() {

25  
ş›Á
;

26 
	}
}

28 
´iv©e
 
	$£ndIfNÙNuÎ
(
Mes§ge
 
mes§ge
) {

29 ià(
mes§ge
 !ğ
nuÎ
 && !mes§ge.
	`isNuÎMes§ge
()) {

30 
mes§ge
.
£nd”
 = 
ş›Á
;

31 
mes§gšgS”viû
.
	`š£¹Mes§ge
(
mes§ge
);

33 
	}
}

38 
public
 
Mes§ge
 
	$ü—‹Mes§ge
() {

39  
Ãw
 
	`Mes§ge
(
	`toSŒšg
(), 
ş›Á
.
id
 % 9, 
queueId
);

40 
	}
}

50 
public
 
	$£ndMes§gesIndefš™–y
(
Mes§ge
 
š™ŸlMes§ge
) {

51 
Sy¡em
.
out
.
	`´šn
("S¹ " + 
this
);

53 
	`£ndIfNÙNuÎ
(
š™ŸlMes§ge
);

55 
Œue
) {

56 
Mes§ge
 
mes§ge
 = 
mes§gšgS”viû
.
	`g‘Fœ¡Mes§ge
(
queueId
, 
ş›Á
, 
Œue
);

57 ià(!
mes§ge
.
	`isNuÎMes§ge
()) {

58 
mes§ge
.
»ûiv”
 = mes§ge.
£nd”
;

59 
mes§ge
.
‹xt
 +ğ"," + 
ş›Á
.
id
;

61 
	`befÜeS’dšgMes§ge
(
mes§ge
);

62 
	`£ndIfNÙNuÎ
(
mes§ge
);

64 
Œy
 {

65 
Th»ad
.
	`¦“p
(50);

66 } 
	`ÿtch
 (
Exû±iÚ
 
e
) {

67 
e
.
	`´štSckT¿û
();

71 
	}
}

79 
´Ùeùed
 
	$befÜeS’dšgMes§ge
(
Mes§ge
 
mes§ge
è{
	}
}

81 @
Ov”ride


82 
public
 
SŒšg
 
	$toSŒšg
() {

83  
	`g‘CÏss
().
	`g‘Sim¶eName
(è+ " " + 
ş›Á
.
id
;

84 
	}
}

89 
public
 
Mes§gšgS”viû
 
	$g‘PÜt
() {

90 
SŒšg
 
add»ss
 = 
S”v”
.
	`g‘S”viûU¾
();

91 
Œy
 {

92 
URL
 
u¾
 = 
Ãw
 
	`URL
(
add»ss
);

93 
QName
 
qÇme
 = 
Ãw
 
	`QName
(
Mes§gšgS”viû
.
NAMESPACE
, Mes§gšgS”viû.
SERVICE_NAME
);

94 
S”viû
 
£rviû
 = S”viû.
	`ü—‹
(
u¾
, 
qÇme
);

95  
£rviû
.
	`g‘PÜt
(
Mes§gšgS”viû
.
şass
);

96 } 
	`ÿtch
 (
M®fÜmedURLExû±iÚ
 
e
) {

97 
throw
 
Ãw
 
	`IÎeg®S‹Exû±iÚ
(
e
);

99 
	}
}

	@ch/ethz/inf/asl13/user40/client/Worker.java

1 
·ckage
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
.
	gş›Á
;

3 
impÜt
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
.*;

9 
public
 
fš®
 cÏs 
	cWÜk”
 
ex‹nds
 
	mMes§gšgS”viûCl›Á
 {

11 
public
 
fš®
 
	mREQUEST_QUEUE
 = 56;

12 
public
 
fš®
 
	mRESULT_QUEUE
 = 
REQUEST_QUEUE
 + 1;

14 
´iv©e
 
	$WÜk”
(
SŒšg
 
ş›ÁID
) {

15 
	`su³r
(
ş›ÁID
, 
REQUEST_QUEUE
);

18 @
Ov”ride


19 
´Ùeùed
 
	$befÜeS’dšgMes§ge
(
Mes§ge
 
mes§ge
) {

22 
Œy
 {

23 
Th»ad
.
	`¦“p
(500);

24 } 
	`ÿtch
 (
Exû±iÚ
 
e
) {

25 
e
.
	`´štSckT¿û
();

28 
mes§ge
.
queueId
 = 
RESULT_QUEUE
;

29 
mes§ge
.
‹xt
 +ğ"DÚby WÜk” " + 
	`g‘Cl›Á
();

30 
	}
}

36 
public
 
	$maš
(
SŒšg
[] 
¬gs
) {

37 ià(
¬gs
.
Ëngth
 < 1) {

38 
Sy¡em
.
”r
.
	`´šn
("u§ge: jav¨" + 
WÜk”
.
şass
.
	`g‘Name
() + " clientID");

39 
Sy¡em
.
	`ex™
(1);

42 
WÜk”
 
­p
 = 
Ãw
 
	`WÜk”
(
¬gs
[0]);

44 
­p
.
	`£ndMes§gesIndefš™–y
(
nuÎ
);

45 
	}
}

	@ch/ethz/inf/asl13/user40/server/MessagingServiceImpl.java

1 
·ckage
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
.
	g£rv”
;

3 
impÜt
 
	gjava
.
	gut
.*;

4 
impÜt
 
	gjava
.
	gut
.
	gcÚcu¼’t
.*;

5 
impÜt
 
	gjavax
.
	gjws
.
	gWebS”viû
;

6 
impÜt
 
	gjavax
.
	gxml
.
	gws
.
	gEndpošt
;

7 
impÜt
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
.*;

15 @
WebS”viû
(
’dpoštIÁ”çû
 = "ch.ethz.inf.asl13.user40.MessagingService")

16 
public
 cÏs 
	cMes§gšgS”viûIm¶
 
im¶em’ts
 
Mes§gšgS”viû
 {

18 
´iv©e
 
fš®
 
Objeù
 
queueLock
 = 
Ãw
 Object();

19 
´iv©e
 
fš®
 
	mQueue
<
	mMes§ge
> 
	mmes§ges
 = 
Ãw
 
CÚcu¼’tLškedQueue
<
Mes§ge
>();

20 
´iv©e
 [] 
	mqueues
 = 
Ãw
 [0];

22 @
Ov”ride


23 
public
 
	$š£¹Mes§ge
(
Mes§ge
 
mes§ge
) {

24 ià(
mes§ge
 =ğ
nuÎ
è
throw
 
Ãw
 
	`NuÎPoš‹rExû±iÚ
();

25 ià(
mes§ge
.
	`isNuÎMes§ge
()è
throw
 
Ãw
 
	`IÎeg®Argum’tExû±iÚ
();

27 
mes§ges
.
	`add
(
mes§ge
);

30 @
Ov”ride


31 
public
 
Mes§ge
 
	$g‘Fœ¡Mes§ge
(
queue
, 
Cl›Á
 
£nd”
, 
boŞ—n
 
»move
) {

32 
Mes§ge
 
m
 : 
mes§ges
) {

33 ià(
m
.
queueId
 =ğ
queue
 &&

34 (
m
.
»ûiv”
 =ğ
nuÎ
 ||

35 (
£nd”
 !ğ
nuÎ
 && 
m
.
»ûiv”
.
id
 == sender.id)))

38 ià(
»move
) {

39 
mes§ges
.
	`»move
(
m
);

42  
m
;

46  
Ãw
 
	`Mes§ge
();

47 
	}
}

49 @
Ov”ride


50 
public
 
Mes§ge
 
	$g‘Mes§geOfHighe¡PriÜ™y
(
queue
, 
Cl›Á
 
£nd”
, 
boŞ—n
 
»move
) {

51  
	`g‘Fœ¡Mes§ge
(
queue
, 
£nd”
, 
»move
);

52 
	}
}

54 @
Ov”ride


55 
public
 [] 
	$li¡Queues
() {

56  
queues
;

57 
	}
}

59 @
Ov”ride


60 
public
 [] 
	$li¡QueuesW™hWa™šgMes§ges
(
Cl›Á
 
ş›Á
) {

61  
Ãw
 [0];

62 
	}
}

64 @
Ov”ride


65 
public
 
	$ü—‹Queue
() {

66 
	`synchrÚized
(
queueLock
) {

67 [] 
q
 = 
Ãw
 [
queues
.
Ëngth
 + 1];

68 
id
 = 1;

69 
i
 = 0; i < 
queues
.
Ëngth
; i++) {

70 
q
[
i
] = 
queues
[i];

71 
id
 +ğ
queues
[
i
];

74 
q
[
queues
.
Ëngth
] = 
id
;

76 
queues
 = 
q
;

78  
id
;

80 
	}
}

82 @
Ov”ride


83 
public
 
	$d–‘eQueue
(
queue
) {

84 
	`synchrÚized
(
queueLock
) {

85 [] 
q
 = 
Ãw
 [
queues
.
Ëngth
 - 1];

86 
i
 = 0, 
j
 = 0; i < 
queues
.
Ëngth
; i++) {

87 ià(
queues
[
i
] !ğ
queue
) {

88 ià(
j
 < 
i
) {

89 
q
[
j
++] = 
queues
[
i
];

99 
queues
 = 
q
;

101 
	}
}

	@ch/ethz/inf/asl13/user40/server/Server.java

1 
·ckage
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
.
	g£rv”
;

3 
impÜt
 
	gjava
.
	gut
.
	gHashM­
;

4 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

5 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLogg”
;

6 
impÜt
 
	gjavax
.
	gxml
.
	gÇme¥aû
.
	gQName
;

7 
impÜt
 
	gjavax
.
	gxml
.
	gws
.
	gEndpošt
;

8 
impÜt
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
.
	gMes§gšgS”viû
;

9 
impÜt
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
.
	gut
.
	gReque¡T¿ûr
;

14 
public
 cÏs 
	cS”v”
 {

16 
public
 
fš®
 
SŒšg
 
	mSERVICE_URL_KEY
 = "service.url";

18 
´iv©e
 
fš®
 
Logg”
 
	mlogg”
 = Logg”.
g‘Logg”
(
S”v”
.
şass
.
g‘Name
());

20 
public
 
SŒšg
 
	$g‘S”viûU¾
() {

21  
Sy¡em
.
	`g‘Prİ”ty
(
SERVICE_URL_KEY
, "http://localhost:9999/");

28 
public
 
	$maš
(
SŒšg
[] 
¬gs
) {

29 
	`publish
(
Ãw
 
	`Mes§gšgS”viûIm¶
());

30 
	}
}

37 
public
 
Endpošt
 
	$publish
(
Mes§gšgS”viû
 
£rviû
) {

39 
£rviû
 = 
Ãw
 
	`Reque¡T¿ûr
(service);

41 
Endpošt
 
’dpošt
 = Endpošt.
	`ü—‹
(
£rviû
);

42 
’dpošt
.
	`£tPrİ”t›s
(
Ãw
 
HashM­
<
SŒšg
, 
Objeù
>() {{

43 
	`put
(
Endpošt
.
WSDL_PORT
, 
Ãw
 
	`QName
(
Mes§gšgS”viû
.
NAMESPACE
, Mes§gšgS”viû.
PORT_NAME
));

44 
	`put
(
Endpošt
.
WSDL_SERVICE
, 
Ãw
 
	`QName
(
Mes§gšgS”viû
.
NAMESPACE
, Mes§gšgS”viû.
SERVICE_NAME
));

47 
SŒšg
 
add»ss
 = 
	`g‘S”viûU¾
();

48 
’dpošt
.
	`publish
(
add»ss
);

49 
logg”
.
	`log
(
Lev–
.
INFO
, "Li¡’šg‡ˆ{0}â€¦", 
add»ss
);

50  
’dpošt
;

51 
	}
}

	@ch/ethz/inf/asl13/user40/util/Function.java

1 
·ckage
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
.
	gut
;

8 
public
 
š‹rçû
 
	gFunùiÚ
<
	gT
> {

14 
T
 
execu‹
();

	@ch/ethz/inf/asl13/user40/util/RequestTracer.java

1 
·ckage
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
.
	gut
;

3 
impÜt
 
	gjava
.
	gut
.
	gcÚcu¼’t
.
	g©omic
.
	gAtomicLÚg
;

4 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

5 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLogg”
;

6 
impÜt
 
	gjavax
.
	gjws
.
	gWebS”viû
;

7 
impÜt
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
.*;

12 @
WebS”viû
(
’dpoštIÁ”çû
 = "ch.ethz.inf.asl13.user40.MessagingService")

13 
public
 
fš®
 cÏs 
	cReque¡T¿ûr
 
im¶em’ts
 
Mes§gšgS”viû
 {

16 
´iv©e
 
fš®
 
MESSAGES_TO_LOG
 = 100;

18 
´iv©e
 
fš®
 
Logg”
 
	mlogg”
 = Logg”.
g‘Logg”
(
Reque¡T¿ûr
.
şass
.
g‘Name
());

20 
´iv©e
 
fš®
 
Mes§gšgS”viû
 
	m£rviû
;

21 
´iv©e
 
fš®
 
AtomicLÚg
 
	mš£¹CouÁ
 = 
Ãw
 AtomicLong();

26 
public
 
	$Reque¡T¿ûr
(
Mes§gšgS”viû
 
£rviû
) {

27 ià(
£rviû
 =ğ
nuÎ
è
throw
 
Ãw
 
	`NuÎPoš‹rExû±iÚ
();

29 
this
.
£rviû
 = service;

32 @
Ov”ride


33 
public
 
	$š£¹Mes§ge
(
fš®
 
Mes§ge
 
mes§ge
) {

34 
Stİw©ch
.
	`runAndM—su»
(
Ãw
 
FunùiÚ
<
Void
>() {

35 @
Ov”ride


36 
public
 
Void
 
	`execu‹
() {

37 
£rviû
.
	`š£¹Mes§ge
(
mes§ge
);

38  
nuÎ
;

42 
	`log
(
mes§ge
);

43 
	}
}

45 @
Ov”ride


46 
public
 
Mes§ge
 
	$g‘Fœ¡Mes§ge
(
fš®
 
queue
, fš® 
Cl›Á
 
£nd”
, fš® 
boŞ—n
 
»move
) {

47 
Mes§ge
 
mes§ge
 = 
Stİw©ch
.
	`runAndM—su»
(
Ãw
 
FunùiÚ
<Message>() {

48 @
Ov”ride


49 
public
 
Mes§ge
 
	`execu‹
() {

50  
£rviû
.
	`g‘Fœ¡Mes§ge
(
queue
, 
£nd”
, 
»move
);

54 
	`log
(
mes§ge
);

55  
mes§ge
;

56 
	}
}

58 @
Ov”ride


59 
public
 
Mes§ge
 
	$g‘Mes§geOfHighe¡PriÜ™y
(
fš®
 
queue
, fš® 
Cl›Á
 
£nd”
, fš® 
boŞ—n
 
»move
) {

60 
Mes§ge
 
mes§ge
 = 
Stİw©ch
.
	`runAndM—su»
(
Ãw
 
FunùiÚ
<Message>() {

61 @
Ov”ride


62 
public
 
Mes§ge
 
	`execu‹
() {

63  
£rviû
.
	`g‘Mes§geOfHighe¡PriÜ™y
(
queue
, 
£nd”
, 
»move
);

67 
	`log
(
mes§ge
);

68  
mes§ge
;

69 
	}
}

71 @
Ov”ride


72 
public
 [] 
	$li¡Queues
() {

73  
Stİw©ch
.
	`runAndM—su»
(
Ãw
 
FunùiÚ
<[]>() {

74 @
Ov”ride


75 
public
 [] 
	`execu‹
() {

76  
£rviû
.
	`li¡Queues
();

79 
	}
}

81 @
Ov”ride


82 
public
 [] 
	$li¡QueuesW™hWa™šgMes§ges
(
fš®
 
Cl›Á
 
ş›Á
) {

83  
Stİw©ch
.
	`runAndM—su»
(
Ãw
 
FunùiÚ
<[]>() {

84 @
Ov”ride


85 
public
 [] 
	`execu‹
() {

86  
£rviû
.
	`li¡QueuesW™hWa™šgMes§ges
(
ş›Á
);

89 
	}
}

91 @
Ov”ride


92 
public
 
	$ü—‹Queue
() {

93  
Stİw©ch
.
	`runAndM—su»
(
Ãw
 
FunùiÚ
<
IÁeg”
>() {

94 @
Ov”ride


95 
public
 
IÁeg”
 
	`execu‹
() {

96  
£rviû
.
	`ü—‹Queue
();

99 
	}
}

101 @
Ov”ride


102 
public
 
	$d–‘eQueue
(
fš®
 
queue
) {

103 
Stİw©ch
.
	`runAndM—su»
(
Ãw
 
FunùiÚ
<
Void
>() {

104 @
Ov”ride


105 
public
 
Void
 
	`execu‹
() {

106 
£rviû
.
	`d–‘eQueue
(
queue
);

107  
nuÎ
;

110 
	}
}

112 
´iv©e
 
	$log
(
Mes§ge
 
mes§ge
)

114 
n
 = 
š£¹CouÁ
.
	`šüem’tAndG‘
();

115 ià(
n
 < 
MESSAGES_TO_LOG
) {

116 
logg”
.
	`log
(
Lev–
.
FINE
, 
mes§ge
.
	`toSŒšg
());

118 ià(
n
 % 1000 == 0) {

119 
logg”
.
	`log
(
Lev–
.
INFO
, "{0} mes§ge ´oûs£d", 
n
);

121 
	}
}

	@ch/ethz/inf/asl13/user40/util/Stopwatch.java

1 
·ckage
 
	gch
.
	g‘hz
.
	gšf
.
	ga¦13
.
	gu£r40
.
	gut
;

3 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

4 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLogg”
;

9 
public
 cÏs 
	cStİw©ch
 {

11 
´iv©e
 
fš®
 
Logg”
 
	mlogg”
 = Logg”.
g‘Logg”
(
Stİw©ch
.
şass
.
g‘Name
());

17 
public
 <
	mT
> 
T
 
runAndM—su»
(
FunùiÚ
<T> 
funùiÚ
) {

18 ià(
	mfunùiÚ
 =ğ
nuÎ
è
throw
 
Ãw
 
NuÎPoš‹rExû±iÚ
();

20 
Exû±iÚ
 
	mexû±iÚ
 = 
nuÎ
;

21 
	mtime
 = 
Sy¡em
.
ÇnoTime
();

22 
	mŒy
 {

23  
	mfunùiÚ
.
execu‹
();

25 
ÿtch
 (
RuÁimeExû±iÚ
 
e
) {

26 
	mexû±iÚ
 = 
e
;

27 
throw
 
	me
;

29 
ÿtch
 (
Exû±iÚ
 
e
) {

36 
	mexû±iÚ
 = 
e
;

37 
throw
 
Ãw
 
RuÁimeExû±iÚ
(
e
);

39 
	mfš®ly
 {

40 
	mtime
 = (
Sy¡em
.
ÇnoTime
(è- 
time
) / 1000 + 1;

42 
SŒšg
 
	mÇme
 = 
funùiÚ
.
g‘CÏss
().
g‘Name
();

43 ià(
	mexû±iÚ
 =ğ
nuÎ
) {

44 
logg”
.
log
(
Lev–
.
FINE
, 
SŒšg
.
fÜm©
("%d m fÜ %s", 
time
, 
Çme
));

46 
	mlogg”
.
log
(
Lev–
.
FINE
, 
SŒšg
.
fÜm©
("%d m fÜ % w™hƒ¼Ü. %s", 
time
, 
Çme
, 
exû±iÚ
));

	@
1
.
1
/usr/include
15
718
ch/ethz/inf/asl13/user40/Client.java
ch/ethz/inf/asl13/user40/DatabaseServicePreparedStatement.java
ch/ethz/inf/asl13/user40/Message.java
ch/ethz/inf/asl13/user40/MessagingService.java
ch/ethz/inf/asl13/user40/client/Chatter.java
ch/ethz/inf/asl13/user40/client/Dictator.java
ch/ethz/inf/asl13/user40/client/MainFrame.java
ch/ethz/inf/asl13/user40/client/MessagePasser.java
ch/ethz/inf/asl13/user40/client/MessagingServiceClient.java
ch/ethz/inf/asl13/user40/client/Worker.java
ch/ethz/inf/asl13/user40/server/MessagingServiceImpl.java
ch/ethz/inf/asl13/user40/server/Server.java
ch/ethz/inf/asl13/user40/util/Function.java
ch/ethz/inf/asl13/user40/util/RequestTracer.java
ch/ethz/inf/asl13/user40/util/Stopwatch.java
